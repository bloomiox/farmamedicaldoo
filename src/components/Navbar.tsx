import React, { useState, useEffect } from 'react';
import { Menu, X, ChevronDown } from 'lucide-react';
import { useTranslation } from 'react-i18next';
import { Link, useLocation } from 'react-router-dom';
import LanguageSwitcher from './LanguageSwitcher';

const Navbar: React.FC = () => {
  const [isOpen, setIsOpen] = useState(false);
  const [productDropdownOpen, setProductDropdownOpen] = useState(false);
  const { t } = useTranslation();
  const location = useLocation();

  // Close mobile menu when route changes
  useEffect(() => {
    setIsOpen(false);
    setProductDropdownOpen(false);
  }, [location.pathname]);

  // Function to check if a link is active
  const isActive = (path: string) => {
    return location.pathname === path;
  };

  // Function to check if products section is active
  const isProductActive = () => {
    return location.pathname === '/roott-implants' || location.pathname === '/kerox-dental';
  };

  // Helper function to determine if we should use hash link or regular link
  const getNavigationLink = (sectionId: string) => {
    // If we're on the homepage, use an anchor link
    if (location.pathname === '/') {
      return `#${sectionId}`;
    }
    // If we're on another page, link back to homepage with the section anchor
    return `/#${sectionId}`;
  };

  return (
    <nav className="bg-white shadow-md fixed w-full z-50">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="flex justify-between h-20">
          <div className="flex items-center">
            <div className="flex-shrink-0 flex items-center">
              <Link to="/">
                <div className="flex items-center">
                  <svg xmlns="http://www.w3.org/2000/svg" width="120" height="120" viewBox="0 0 375 375">
                    <g clipPath="url(#71a4378902)">
                      <g clipPath="url(#11ccc6f5d9)">
                        <g clipPath="url(#5db879d453)">
                          <path fill="#add15a" d="M 131.210938 140.035156 C 133.550781 139.652344 135.753906 138.921875 137.867188 138.097656 C 139.964844 137.238281 141.90625 136.140625 143.707031 134.945312 C 147.257812 132.433594 150.09375 129.277344 152.085938 125.671875 C 153.066406 123.851562 153.894531 121.960938 154.554688 119.988281 C 154.71875 119.492188 154.886719 119.015625 155.015625 118.503906 L 155.226562 117.75 L 155.335938 117.375 L 155.390625 117.195312 L 155.554688 116.769531 L 156.085938 115.589844 L 156.523438 114.683594 C 156.828125 114.09375 157.136719 113.5 157.488281 112.902344 C 158.210938 111.699219 158.882812 110.53125 160.339844 109.085938 C 160.65625 108.757812 161.1875 108.292969 161.335938 108.175781 L 162.070312 107.558594 C 162.667969 107.085938 163.238281 106.695312 163.796875 106.296875 C 166.121094 104.742188 168.683594 103.449219 171.453125 102.613281 C 176.988281 100.894531 183.144531 101.15625 188.449219 102.902344 C 193.800781 104.609375 198.386719 107.492188 202.390625 110.726562 C 206.390625 113.996094 209.824219 117.664062 212.914062 121.511719 C 214.492188 123.410156 215.898438 125.417969 217.296875 127.414062 C 218.695312 129.40625 219.957031 131.476562 221.21875 133.53125 L 221.441406 133.886719 L 221.453125 133.917969 C 221.804688 134.617188 222.40625 135.824219 222.847656 136.769531 C 223.3125 137.777344 223.714844 138.804688 224.113281 139.824219 C 224.894531 141.875 225.59375 143.9375 226.15625 146.019531 C 226.710938 148.113281 227.203125 150.207031 227.578125 152.328125 C 227.90625 154.445312 228.207031 156.558594 228.378906 158.679688 C 228.507812 159.730469 228.550781 160.796875 228.597656 161.855469 C 228.652344 162.910156 228.71875 163.96875 228.667969 165.03125 C 228.628906 167.148438 228.574219 169.25 228.375 171.34375 C 228.246094 173.433594 227.84375 175.5 227.527344 177.558594 C 227.410156 178.585938 227.117188 179.597656 226.878906 180.609375 L 226.117188 183.628906 C 225.832031 181.550781 225.6875 179.519531 225.398438 177.492188 L 224.980469 174.484375 C 224.875 173.484375 224.609375 172.484375 224.464844 171.503906 C 224.171875 169.523438 223.722656 167.5625 223.285156 165.628906 C 223.089844 164.65625 222.761719 163.714844 222.5625 162.75 C 222.320312 161.796875 222.097656 160.835938 221.789062 159.898438 C 221.253906 158.007812 220.617188 156.160156 219.957031 154.332031 C 219.25 152.515625 218.589844 150.710938 217.796875 148.949219 C 217 147.203125 216.214844 145.476562 215.308594 143.8125 C 214.875 142.980469 214.390625 142.164062 213.925781 141.367188 C 213.433594 140.503906 213.054688 139.925781 212.382812 138.863281 L 212.621094 139.242188 C 209.90625 135.636719 207.15625 132.113281 204.222656 128.835938 C 202.785156 127.183594 201.277344 125.605469 199.722656 124.113281 C 198.207031 122.589844 196.617188 121.199219 195 119.871094 C 191.746094 117.285156 188.308594 115.128906 184.796875 113.882812 C 181.28125 112.613281 177.730469 112.273438 174.25 113.011719 C 172.511719 113.386719 170.777344 114.007812 169.125 114.898438 L 167.941406 115.578125 C 167.785156 115.65625 167.511719 115.851562 167.273438 116 C 166.9375 116.21875 167.054688 116.160156 166.957031 116.242188 C 166.699219 116.378906 166.039062 117.164062 165.53125 117.925781 C 165.257812 118.316406 164.996094 118.742188 164.730469 119.160156 L 164.117188 120.195312 L 164.066406 120.292969 L 164.035156 120.347656 L 164.023438 120.367188 C 164.0625 120.277344 163.933594 120.601562 164.097656 120.175781 L 164.003906 120.398438 L 163.796875 120.839844 L 163.40625 121.734375 C 163.144531 122.324219 162.839844 122.894531 162.542969 123.480469 C 161.347656 125.78125 159.9375 128.007812 158.214844 130 C 154.863281 134.023438 150.484375 137.203125 145.695312 138.894531 C 143.328125 139.785156 140.859375 140.273438 138.421875 140.480469 C 135.984375 140.695312 133.527344 140.582031 131.210938 140.035156 Z M 131.210938 140.035156 " />
                        </g>
                      </g>
                    </g>
                    <g clipPath="url(#5017edd567)">
                      <g clipPath="url(#b956389c54)">
                        <g clipPath="url(#9c99f31790)">
                          <path fill="#a6a6a6" d="M 101.433594 149.320312 C 101.035156 149.019531 96.527344 145.558594 96.527344 145.558594 L 96.515625 145.566406 L 95.433594 144.742188 L 94.660156 144.207031 L 94.097656 143.847656 C 93.824219 143.675781 93.558594 143.484375 93.273438 143.34375 L 92.882812 143.128906 C 92.089844 142.675781 91.140625 142.28125 90.058594 141.960938 C 88.84375 141.601562 87.691406 141.53125 86.679688 141.753906 C 86.503906 141.792969 86.328125 141.839844 86.160156 141.898438 L 85.648438 142.066406 C 85.300781 142.246094 85.066406 142.355469 84.828125 142.464844 C 84.683594 142.519531 84.585938 142.570312 84.5 142.609375 L 82.585938 143.917969 L 80.574219 145.757812 L 78.324219 148.4375 C 77.960938 148.863281 77.480469 149.617188 76.964844 150.40625 C 76.519531 151.101562 76.0625 151.800781 75.605469 152.464844 C 74.113281 154.648438 73.082031 157.449219 72.214844 160.128906 C 71.238281 162.953125 70.65625 165.925781 70.101562 169.539062 C 69.941406 171.171875 69.792969 172.800781 69.683594 174.445312 L 69.683594 179.59375 L 70.097656 184.757812 L 70.933594 190.570312 C 71 191.238281 71.230469 192.152344 71.476562 193.121094 C 71.667969 193.933594 71.863281 194.75 72.027344 195.5625 L 72.558594 197.878906 L 73.351562 200.390625 L 75.042969 205.679688 C 75.78125 207.492188 76.515625 209.308594 77.226562 211.152344 L 78.152344 213.597656 L 78.496094 214.304688 C 91.039062 214.273438 85.929688 181.765625 86.304688 179.613281 C 89.8125 159.59375 109.914062 155.726562 101.433594 149.320312 Z M 101.433594 149.320312 " />
                        </g>
                      </g>
                    </g>
                    <g clipPath="url(#d2c3414f44)">
                      <g clipPath="url(#bf0f4696cc)">
                        <g clipPath="url(#28255bab82)">
                          <path fill="#add15a" d="M 169.121094 131.96875 C 168.316406 133.296875 167.398438 134.550781 166.429688 135.773438 C 165.445312 136.984375 164.433594 138.179688 163.335938 139.292969 C 162.269531 140.472656 161.046875 141.460938 159.890625 142.539062 C 158.699219 143.59375 157.378906 144.472656 156.113281 145.457031 C 154.804688 146.378906 153.375 147.136719 151.988281 147.972656 C 150.554688 148.714844 149.039062 149.316406 147.539062 149.992188 C 146.03125 150.597656 144.414062 150.964844 142.824219 151.453125 C 141.242188 151.980469 139.546875 152.007812 137.890625 152.257812 C 136.226562 152.554688 134.554688 152.417969 132.871094 152.359375 C 131.175781 152.308594 129.480469 152.25 127.855469 151.816406 C 126.222656 151.464844 124.535156 151.1875 122.910156 150.742188 L 118.21875 148.957031 C 116.605469 148.402344 115.183594 147.589844 113.765625 146.742188 L 109.453125 144.238281 C 108.074219 143.339844 106.835938 142.289062 105.527344 141.3125 L 101.621094 138.3125 L 101.90625 138.554688 L 100.648438 137.585938 L 99.554688 136.828125 C 98.789062 136.363281 98.058594 135.851562 97.285156 135.460938 C 95.761719 134.582031 94.167969 133.953125 92.578125 133.476562 C 89.410156 132.550781 86.265625 132.539062 83.355469 133.503906 C 82.605469 133.625 81.921875 134.074219 81.203125 134.390625 C 80.488281 134.699219 79.777344 135.027344 79.117188 135.570312 L 77.074219 136.964844 L 75.148438 138.726562 L 74.191406 139.59375 L 73.3125 140.644531 L 71.558594 142.738281 C 70.386719 144.140625 69.449219 145.839844 68.363281 147.375 C 66.289062 150.4375 64.980469 153.785156 63.800781 157.371094 C 62.574219 160.910156 61.898438 164.675781 61.304688 168.433594 C 61.132812 170.335938 60.964844 172.246094 60.839844 174.160156 L 60.839844 179.941406 L 61.300781 185.742188 L 62.144531 191.542969 C 62.355469 193.484375 62.96875 195.378906 63.355469 197.304688 L 64.015625 200.195312 L 64.902344 203.03125 L 66.722656 208.710938 C 67.484375 210.558594 68.230469 212.410156 68.945312 214.285156 L 70.027344 217.101562 L 71.320312 219.828125 L 73.925781 225.300781 C 74.648438 226.941406 75.910156 228.871094 76.863281 230.640625 L 79.910156 236.109375 C 84.101562 243.191406 88.148438 250.402344 92.472656 257.511719 C 94.667969 261.03125 96.660156 264.738281 98.890625 268.226562 C 101.175781 271.664062 103.410156 275.171875 105.652344 278.765625 C 102.726562 275.8125 99.800781 272.800781 96.914062 269.710938 C 94.046875 266.601562 91.476562 263.324219 88.816406 260.082031 C 86.179688 256.820312 83.464844 253.609375 80.992188 250.199219 L 73.4375 240.050781 C 70.996094 236.578125 68.679688 233.367188 66.324219 229.574219 L 63.101562 224.003906 L 61.480469 221.199219 L 60.074219 218.292969 C 59.117188 216.34375 58.203125 214.378906 57.296875 212.410156 C 56.488281 210.394531 55.765625 208.335938 55 206.296875 L 53.875 203.21875 L 52.976562 200.054688 C 52.429688 197.929688 51.675781 195.855469 51.308594 193.675781 C 50.902344 191.507812 50.425781 189.335938 50.078125 187.152344 L 49.445312 180.503906 C 49.355469 178.269531 49.367188 176.035156 49.332031 173.796875 C 49.433594 171.550781 49.589844 169.296875 49.78125 167.058594 C 50.394531 162.589844 51.117188 158.089844 52.601562 153.730469 C 54.054688 149.453125 55.929688 145 58.578125 141.179688 C 59.910156 139.316406 61.046875 137.382812 62.558594 135.601562 L 64.867188 132.941406 L 66.03125 131.625 L 67.390625 130.410156 C 70.761719 127.03125 75.378906 124.363281 80.398438 122.96875 C 85.484375 121.558594 91.046875 121.957031 95.765625 123.636719 C 98.132812 124.460938 100.371094 125.53125 102.40625 126.824219 C 103.453125 127.425781 104.410156 128.144531 105.363281 128.878906 L 106.742188 130.003906 C 107.203125 130.414062 107.65625 130.820312 107.878906 131.042969 L 108.164062 131.289062 L 111.363281 134.167969 C 112.453125 135.117188 113.480469 136.15625 114.601562 137.039062 L 118.101562 139.441406 C 119.261719 140.273438 120.429688 141.09375 121.714844 141.632812 L 125.464844 143.554688 C 126.75 144.0625 128.097656 144.421875 129.414062 144.886719 C 130.726562 145.417969 132.097656 145.589844 133.480469 145.78125 C 134.851562 145.996094 136.242188 146.292969 137.640625 146.171875 C 139.03125 146.089844 140.472656 146.324219 141.875 146.050781 C 143.261719 145.820312 144.710938 145.730469 146.101562 145.378906 C 147.488281 144.964844 148.90625 144.636719 150.28125 144.152344 C 151.632812 143.582031 153.007812 143.070312 154.363281 142.449219 C 155.660156 141.75 157.046875 141.148438 158.3125 140.351562 C 159.574219 139.539062 160.898438 138.800781 162.085938 137.871094 C 164.597656 136.148438 166.921875 134.144531 169.121094 131.96875 Z M 169.121094 131.96875 " />
                        </g>
                      </g>
                    </g>
                    <g fill="#add15a" fillOpacity="1">
                      <g transform="translate(111.081948, 213.822672)">
                        <g>
                          <path d="M 10.859375 -25.265625 L 10.859375 -17.0625 L 25.21875 -17.0625 L 25.21875 -11.296875 L 10.859375 -11.296875 L 10.859375 0 L 3.671875 0 L 3.671875 -31.015625 L 27.125 -31.015625 L 27.125 -25.265625 Z M 10.859375 -25.265625 " />
                        </g>
                      </g>
                    </g>
                    <g fill="#add15a" fillOpacity="1">
                      <g transform="translate(139.395178, 213.822672)">
                        <g>
                          <path d="M 24.109375 -6.640625 L 9.703125 -6.640625 L 6.953125 0 L -0.40625 0 L 13.421875 -31.015625 L 20.515625 -31.015625 L 34.390625 0 L 26.859375 0 Z M 21.84375 -12.09375 L 16.921875 -23.96875 L 12.015625 -12.09375 Z M 21.84375 -12.09375 " />
                        </g>
                      </g>
                    </g>
                    <g fill="#add15a" fillOpacity="1">
                      <g transform="translate(173.335618, 213.822672)">
                        <g>
                          <path d="M 23.4375 0 L 17.453125 -8.640625 L 10.859375 -8.640625 L 10.859375 0 L 3.671875 0 L 3.671875 -31.015625 L 17.109375 -31.015625 C 19.847656 -31.015625 22.226562 -30.554688 24.25 -29.640625 C 26.28125 -28.722656 27.84375 -27.421875 28.9375 -25.734375 C 30.03125 -24.054688 30.578125 -22.066406 30.578125 -19.765625 C 30.578125 -17.460938 30.019531 -15.472656 28.90625 -13.796875 C 27.800781 -12.128906 26.226562 -10.851562 24.1875 -9.96875 L 31.15625 0 Z M 23.3125 -19.765625 C 23.3125 -21.503906 22.75 -22.835938 21.625 -23.765625 C 20.5 -24.703125 18.859375 -25.171875 16.703125 -25.171875 L 10.859375 -25.171875 L 10.859375 -14.359375 L 16.703125 -14.359375 C 18.859375 -14.359375 20.5 -14.828125 21.625 -15.765625 C 22.75 -16.710938 23.3125 -18.046875 23.3125 -19.765625 Z M 23.3125 -19.765625 " />
                        </g>
                      </g>
                    </g>
                    <g fill="#add15a" fillOpacity="1">
                      <g transform="translate(205.902479, 213.822672)">
                        <g>
                          <path d="M 31.90625 0 L 31.859375 -18.609375 L 22.734375 -3.28125 L 19.5 -3.28125 L 10.40625 -18.21875 L 10.40625 0 L 3.671875 0 L 3.671875 -31.015625 L 9.609375 -31.015625 L 21.21875 -11.75 L 32.65625 -31.015625 L 38.546875 -31.015625 L 38.640625 0 Z M 31.90625 0 " />
                        </g>
                      </g>
                    </g>
                    <g fill="#add15a" fillOpacity="1">
                      <g transform="translate(248.217246, 213.822672)">
                        <g>
                          <path d="M 24.109375 -6.640625 L 9.703125 -6.640625 L 6.953125 0 L -0.40625 0 L 13.421875 -31.015625 L 20.515625 -31.015625 L 34.390625 0 L 26.859375 0 Z M 21.84375 -12.09375 L 16.921875 -23.96875 L 12.015625 -12.09375 Z M 21.84375 -12.09375 " />
                        </g>
                      </g>
                    </g>
                    <g fill="#a6a6a6" fillOpacity="1">
                      <g transform="translate(111.081948, 260.322669)">
                        <g>
                          <path d="M 31.90625 0 L 31.859375 -18.609375 L 22.734375 -3.28125 L 19.5 -3.28125 L 10.40625 -18.21875 L 10.40625 0 L 3.671875 0 L 3.671875 -31.015625 L 9.609375 -31.015625 L 21.21875 -11.75 L 32.65625 -31.015625 L 38.546875 -31.015625 L 38.640625 0 Z M 31.90625 0 " />
                        </g>
                      </g>
                    </g>
                    <g fill="#a6a6a6" fillOpacity="1">
                      <g transform="translate(153.396715, 260.322669)">
                        <g>
                          <path d="M 27.6875 -5.765625 L 27.6875 0 L 3.671875 0 L 3.671875 -31.015625 L 27.125 -31.015625 L 27.125 -25.265625 L 10.8125 -25.265625 L 10.8125 -18.515625 L 25.21875 -18.515625 L 25.21875 -12.9375 L 10.8125 -12.9375 L 10.8125 -5.765625 Z M 27.6875 -5.765625 " />
                        </g>
                      </g>
                    </g>
                    <g fill="#a6a6a6" fillOpacity="1">
                      <g transform="translate(183.127822, 260.322669)">
                        <g>
                          <path d="M 3.671875 -31.015625 L 17.765625 -31.015625 C 21.140625 -31.015625 24.117188 -30.367188 26.703125 -29.078125 C 29.285156 -27.796875 31.289062 -25.988281 32.71875 -23.65625 C 34.15625 -21.320312 34.875 -18.609375 34.875 -15.515625 C 34.875 -12.410156 34.15625 -9.691406 32.71875 -7.359375 C 31.289062 -5.023438 29.285156 -3.210938 26.703125 -1.921875 C 24.117188 -0.640625 21.140625 0 17.765625 0 L 3.671875 0 Z M 17.421875 -5.890625 C 20.515625 -5.890625 22.984375 -6.753906 24.828125 -8.484375 C 26.679688 -10.210938 27.609375 -12.554688 27.609375 -15.515625 C 27.609375 -18.460938 26.679688 -20.800781 24.828125 -22.53125 C 22.984375 -24.257812 20.515625 -25.125 17.421875 -25.125 L 10.859375 -25.125 L 10.859375 -5.890625 Z M 17.421875 -5.890625 " />
                        </g>
                      </g>
                    </g>
                    <g fill="#a6a6a6" fillOpacity="1">
                      <g transform="translate(219.726781, 260.322669)">
                        <g>
                          <path d="M 3.671875 -31.015625 L 10.859375 -31.015625 L 10.859375 0 L 3.671875 0 Z M 3.671875 -31.015625 " />
                        </g>
                      </g>
                    </g>
                    <g fill="#a6a6a6" fillOpacity="1">
                      <g transform="translate(234.260021, 260.322669)">
                        <g>
                          <path d="M 18.515625 0.53125 C 15.359375 0.53125 12.5 -0.15625 9.9375 -1.53125 C 7.382812 -2.90625 5.378906 -4.8125 3.921875 -7.25 C 2.460938 -9.6875 1.734375 -12.441406 1.734375 -15.515625 C 1.734375 -18.585938 2.460938 -21.335938 3.921875 -23.765625 C 5.378906 -26.203125 7.382812 -28.109375 9.9375 -29.484375 C 12.5 -30.859375 15.375 -31.546875 18.5625 -31.546875 C 21.25 -31.546875 23.675781 -31.070312 25.84375 -30.125 C 28.019531 -29.1875 29.847656 -27.832031 31.328125 -26.0625 L 26.71875 -21.796875 C 24.625 -24.222656 22.023438 -25.4375 18.921875 -25.4375 C 17.003906 -25.4375 15.289062 -25.015625 13.78125 -24.171875 C 12.269531 -23.328125 11.09375 -22.148438 10.25 -20.640625 C 9.414062 -19.140625 9 -17.429688 9 -15.515625 C 9 -13.585938 9.414062 -11.867188 10.25 -10.359375 C 11.09375 -8.859375 12.269531 -7.6875 13.78125 -6.84375 C 15.289062 -6 17.003906 -5.578125 18.921875 -5.578125 C 22.023438 -5.578125 24.625 -6.804688 26.71875 -9.265625 L 31.328125 -5 C 29.847656 -3.195312 28.015625 -1.820312 25.828125 -0.875 C 23.648438 0.0625 21.210938 0.53125 18.515625 0.53125 Z M 18.515625 0.53125 " />
                        </g>
                      </g>
                    </g>
                    <g fill="#a6a6a6" fillOpacity="1">
                      <g transform="translate(266.738272, 260.322669)">
                        <g>
                          <path d="M 24.109375 -6.640625 L 9.703125 -6.640625 L 6.953125 0 L -0.40625 0 L 13.421875 -31.015625 L 20.515625 -31.015625 L 34.390625 0 L 26.859375 0 Z M 21.84375 -12.09375 L 16.921875 -23.96875 L 12.015625 -12.09375 Z M 21.84375 -12.09375 " />
                        </g>
                      </g>
                    </g>
                    <g fill="#a6a6a6" fillOpacity="1">
                      <g transform="translate(300.678711, 260.322669)">
                        <g>
                          <path d="M 3.671875 -31.015625 L 10.859375 -31.015625 L 10.859375 -5.84375 L 26.40625 -5.84375 L 26.40625 0 L 3.671875 0 Z M 3.671875 -31.015625 " />
                        </g>
                      </g>
                    </g>
                  </svg>
                </div>
              </Link>
            </div>
            <div className="hidden md:ml-6 md:flex md:space-x-8">
              <Link 
                to="/" 
                className={`inline-flex items-center px-1 pt-1 text-sm font-medium text-gray-900 border-b-2 ${isActive('/') ? 'border-[#add15a]' : 'border-transparent hover:border-[#add15a]'}`}
              >
                {t('nav.home')}
              </Link>
              <div className="relative">
                <a 
                  href={getNavigationLink('products')}
                  className={`inline-flex items-center px-1 pt-1 text-sm font-medium text-gray-900 border-b-2 ${isProductActive() ? 'border-[#add15a]' : 'border-transparent hover:border-[#add15a]'}`}
                >
                  {t('nav.products')}
                </a>
                <button 
                  className="inline-flex items-center px-1 pt-1 text-sm font-medium ml-1"
                  onClick={() => setProductDropdownOpen(!productDropdownOpen)}
                >
                  <ChevronDown className="h-4 w-4" />
                </button>
                {productDropdownOpen && (
                  <div className="absolute z-10 left-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5">
                    <Link 
                      to="/roott-implants" 
                      className="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                    >
                      {t('nav.roottImplants')}
                    </Link>
                    <Link 
                      to="/kerox-dental" 
                      className="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                    >
                      Kerox Dental
                    </Link>
                  </div>
                )}
              </div>
              <a 
                href={getNavigationLink('about')}
                className="inline-flex items-center px-1 pt-1 text-sm font-medium text-gray-900 border-b-2 border-transparent hover:border-[#add15a]"
              >
                {t('nav.about')}
              </a>
              <Link 
                to="/partners" 
                className={`inline-flex items-center px-1 pt-1 text-sm font-medium text-gray-900 border-b-2 ${isActive('/partners') ? 'border-[#add15a]' : 'border-transparent hover:border-[#add15a]'}`}
              >
                {t('nav.partners')}
              </Link>
              <Link 
                to="/education" 
                className={`inline-flex items-center px-1 pt-1 text-sm font-medium text-gray-900 border-b-2 ${isActive('/education') ? 'border-[#add15a]' : 'border-transparent hover:border-[#add15a]'}`}
              >
                {t('nav.education')}
              </Link>
              <a 
                href={getNavigationLink('contact')}
                className="inline-flex items-center px-1 pt-1 text-sm font-medium text-gray-900 border-b-2 border-transparent hover:border-[#add15a]"
              >
                {t('nav.contact')}
              </a>
            </div>
          </div>
          <div className="hidden md:flex items-center space-x-4">
            <LanguageSwitcher />
          </div>
          <div className="flex items-center md:hidden">
            <LanguageSwitcher />
            <button
              onClick={() => setIsOpen(!isOpen)}
              className="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-[#add15a] ml-2"
            >
              <span className="sr-only">Open main menu</span>
              {isOpen ? (
                <X className="block h-6 w-6" aria-hidden="true" />
              ) : (
                <Menu className="block h-6 w-6" aria-hidden="true" />
              )}
            </button>
          </div>
        </div>
      </div>

      {/* Mobile menu, show/hide based on menu state */}
      {isOpen && (
        <div className="md:hidden">
          <div className="pt-2 pb-3 space-y-1">
            <Link 
              to="/" 
              className={`block pl-3 pr-4 py-2 text-base font-medium ${isActive('/') ? 'bg-gray-50 text-gray-900' : 'text-gray-700 hover:bg-gray-50 hover:text-gray-900'}`}
            >
              {t('nav.home')}
            </Link>
            <div className="flex items-center">
              <a 
                href={getNavigationLink('products')}
                className="flex-grow pl-3 pr-4 py-2 text-base font-medium text-gray-700 hover:bg-gray-50 hover:text-gray-900"
              >
                {t('nav.products')}
              </a>
              <button 
                onClick={() => setProductDropdownOpen(!productDropdownOpen)}
                className="p-2 mr-2"
              >
                <ChevronDown className="h-5 w-5 text-gray-500" />
              </button>
            </div>
            {productDropdownOpen && (
              <div className="pl-6 space-y-1">
                <Link 
                  to="/roott-implants" 
                  className={`block pl-3 pr-4 py-2 text-sm font-medium ${isActive('/roott-implants') ? 'bg-gray-50 text-gray-900' : 'text-gray-600 hover:bg-gray-50 hover:text-gray-900'}`}
                >
                  {t('nav.roottImplants')}
                </Link>
                <Link 
                  to="/kerox-dental"
                  className={`block pl-3 pr-4 py-2 text-sm font-medium ${isActive('/kerox-dental') ? 'bg-gray-50 text-gray-900' : 'text-gray-600 hover:bg-gray-50 hover:text-gray-900'}`}
                >
                  Kerox Dental
                </Link>
              </div>
            )}
            <a 
              href={getNavigationLink('about')}
              className="block pl-3 pr-4 py-2 text-base font-medium text-gray-700 hover:bg-gray-50 hover:text-gray-900"
            >
              {t('nav.about')}
            </a>
            <Link 
              to="/partners" 
              className={`block pl-3 pr-4 py-2 text-base font-medium ${isActive('/partners') ? 'bg-gray-50 text-gray-900' : 'text-gray-700 hover:bg-gray-50 hover:text-gray-900'}`}
            >
              {t('nav.partners')}
            </Link>
            <Link 
              to="/education" 
              className={`block pl-3 pr-4 py-2 text-base font-medium ${isActive('/education') ? 'bg-gray-50 text-gray-900' : 'text-gray-700 hover:bg-gray-50 hover:text-gray-900'}`}
            >
              {t('nav.education')}
            </Link>
            <a 
              href={getNavigationLink('contact')}
              className="block pl-3 pr-4 py-2 text-base font-medium text-gray-700 hover:bg-gray-50 hover:text-gray-900"
            >
              {t('nav.contact')}
            </a>
          </div>
        </div>
      )}
    </nav>
  );
};

export default Navbar;